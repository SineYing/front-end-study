# VirtualDOM实现原理

## 课程目标

- 了解什么是虚拟DOM，以及作用
- Snabbdom的基本使用
- Snabbdom的源码解析

## 什么是虚拟DOM

> 虚拟DOM就是一个JavaScript对象用来描述真实DOM，创建一个虚拟DOM的开销，比创建真实DOM小很多

### 为什么使用虚拟DOM

- 前端开发刀耕火种的时代
- MVVM框架解决视图和状态同步问题
- 模板引擎可以简化视图操作，没法跟踪状态
- 虚拟DOM跟踪状态变化
  - 虚拟DOM可以维护程序的状态，跟踪上一次的状态
  - 通过比较前后两次状态差异更新真实DOM

### 虚拟DOM的作用

- 维护视图和状态的关系
- 复杂视图情况下提升渲染性能--视图比较简单或者首次渲染时虚拟DOM并不能提高性能
- 虚拟DOM最大的好处是跨平台
	- 浏览器平台渲染DOM
	- 服务端渲染SSR（Nuxt.js、Next.js） 	
	- 原生应用（Weex，react Native）
	- 小程序（mpvue、uni-app）等

## snabbdom项目开发

### 步骤

- 安装parcel
- 配置scripts
- 目录结构

### Snabbdom 文档

- 看文档的意义
  - 学习任何一个库都要先看文档
  - 通过文档了解库的作用
  - 看文档中提供的示例，自己快速实现一个demo
  - 通过文档查看API的使用

- init

> init是一个高阶函数，接收一个数组作为参数，数组中加载的是snabbdom的模块，返回一个Patch函数，用来将虚拟DOM转为真实DOM，渲染到界面上

- h

> 用来创建虚拟节点

### 如何学习源码

- 宏观了解
- 带着目标看源码
- 看源码的过程要不求甚解
- 调试
- 参考资料